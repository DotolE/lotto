<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í™©ê¸ˆì† ë¡œë˜ ìƒì„±ê¸°</title>
    <style>
        /* í°íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸° (ê°€ë…ì„± ì¢‹ì€ Gë§ˆì¼“ ì‚°ìŠ¤) */
        @font-face {
            font-family: 'GmarketSansMedium';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansMedium.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        body {
            font-family: 'GmarketSansMedium', sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            background-color: white;
            padding: 2.5rem 1.5rem;
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            text-align: center;
            width: 100%;
            max-width: 420px;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.8rem;
            word-break: keep-all;
        }

        p {
            color: #7f8c8d;
            font-size: 0.95rem;
            margin-bottom: 30px;
        }

        /* 5ê²Œì„ ê²°ê³¼ë¥¼ ë‹´ì„ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        #result-container {
            min-height: 150px;
            margin: 20px 0;
        }

        /* ê° ì¤„(ê²Œì„) ìŠ¤íƒ€ì¼ */
        .numbers-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
            margin: 10px 0;
            padding-bottom: 10px;
            border-bottom: 1px solid #f0f0f0;
        }

        .ball {
            width: 32px; /* 5ì¤„ì´ë¼ ì¡°ê¸ˆ ì‘ê²Œ ì¡°ì • */
            height: 32px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: white;
            font-size: 14px;
            box-shadow: inset -2px -2px 5px rgba(0,0,0,0.2), 2px 5px 5px rgba(0,0,0,0.15);
        }

        button {
            width: 100%;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 18px 0;
            font-size: 18px;
            font-weight: bold;
            border-radius: 15px;
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.1s;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        button:active {
            transform: scale(0.96);
            box-shadow: 0 2px 5px rgba(76, 175, 80, 0.4);
        }

        /* ë³µì‚¬/ê³µìœ  ë²„íŠ¼ ì˜ì—­ */
        #copy-box button {
            margin-top: 10px;
            box-shadow: none;
        }
        
        /* ìƒ‰ìƒ í´ë˜ìŠ¤ */
        .yellow { background-color: #fbc400; }
        .blue { background-color: #69c8f2; }
        .red { background-color: #ff7272; }
        .gray { background-color: #aaaaaa; }
        .green { background-color: #b0d840; }
    </style>
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.1/kakao.min.js"></script>
</head>
<body>

    <div class="container">
        <div id="latest-win-box" style="text-align: center; background-color: #f9f9f9; padding: 15px; margin: 0 auto 20px; border-radius: 15px; display: none;">
            <h3 style="margin: 0 0 5px 0; color: #333;">ğŸ† <span id="drwNo">0000</span>íšŒ ë‹¹ì²¨ê²°ê³¼</h3>
            <p style="font-size: 0.8em; color: #666; margin-bottom: 10px;" id="drwDate">-</p>
            <div id="win-numbers" style="display: flex; justify-content: center; gap: 4px; flex-wrap: wrap;"></div>
            <div style="margin-top: 5px; font-size: 0.8em; color: #333;">
                ë³´ë„ˆìŠ¤: <span id="bonusNo" style="font-weight: bold; color: #f44336;">-</span>
            </div>
        </div>

        <h1>ğŸ° ì´ë²ˆ ì£¼ ì£¼ì¸ê³µì€ ë‚˜!</h1>
        <p>ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ í–‰ìš´ì˜ ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”</p>
        
        <div id="result-container">
            <div style="color:#ccc; margin-top: 50px;">ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”</div>
        </div>

        <button onclick="generateLotto()">ë²ˆí˜¸ ìƒì„±í•˜ê¸° (5ê²Œì„)</button>
        
        <hr style="border: 0; height: 1px; background: #eee; margin: 30px 0;">
        
        <div id="copy-box" style="display: none;">
            <button onclick="copyNumbers()" style="background-color: #333; font-size: 14px; padding: 12px;">
                ğŸ“‹ ì „ì²´ ë²ˆí˜¸ ë³µì‚¬í•˜ê¸°
            </button>
            <button onclick="shareKakao()" style="background-color: #FEE500; color: #000000;">
                ğŸ’¬ ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ìë‘í•˜ê¸°
            </button>
        </div>
        
        <div style="margin-top: 40px; text-align: left; font-size: 0.9rem; color: #555; line-height: 1.6;">
            <h3 style="color: #FF5722;">ğŸ“Š ë¡œë˜ 5ê²Œì„ ìë™ ìƒì„±</h3>
            <p>ì‹¤ì œ ë¡œë˜ êµ¬ë§¤ íŒ¨í„´ì— ë§ì¶° í•œ ë²ˆì— 5ê²Œì„(5ì²œ ì›)ì„ ìƒì„±í•©ë‹ˆë‹¤. ê°ê°ì˜ ì¤„ì€ ë…ë¦½ì ì¸ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì¶”ì¶œë˜ì–´ ë‹¹ì²¨ í™•ë¥ ì„ ë†’ì…ë‹ˆë‹¤.</p>
        </div>
    </div>

<script>
    // ğŸ‘‡ [1] ì¹´ì¹´ì˜¤ JavaScript í‚¤
    const YOUR_KAKAO_KEY = 'af275756cd7eed0e7fc105037bc62673'; 
    // ğŸ‘‡ [2] ê³µìœ  ì‹œ ì´ë™í•  ì£¼ì†Œ
    const shareUrl = 'https://mylotto123.com';

    // ==========================================
    // âœ… 1. í•µì‹¬ ê¸°ëŠ¥ (5ê²Œì„ ìƒì„± + í­ì£½ + ë³µì‚¬)
    // ==========================================

    function generateLotto() {
        const container = document.getElementById('result-container');
        container.innerHTML = ''; // ì´ˆê¸°í™”

        // 5ë²ˆ ë°˜ë³µ (A, B, C, D, E)
        for (let i = 0; i < 5; i++) {
            const numbers = [];
            while (numbers.length < 6) {
                const num = Math.floor(Math.random() * 45) + 1;
                if (!numbers.includes(num)) { numbers.push(num); }
            }
            numbers.sort((a, b) => a - b);

            // í•œ ì¤„ ìƒì„±
            const row = document.createElement('div');
            row.className = 'numbers-container';

            // ì•ŒíŒŒë²³ ë¼ë²¨ (A, B, C...)
            const label = document.createElement('span');
            label.innerText = String.fromCharCode(65 + i); 
            label.style.fontWeight = 'bold';
            label.style.marginRight = '10px';
            label.style.width = '20px'; // ì •ë ¬ì„ ìœ„í•´ í­ ê³ ì •
            label.style.color = '#333';
            row.appendChild(label);

            // ê³µ 6ê°œ ë§Œë“¤ê¸°
            numbers.forEach(num => {
                const ball = document.createElement('div');
                ball.className = `ball ${getColorClass(num)}`;
                ball.textContent = num;
                row.appendChild(ball);
            });

            // ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ í•œ ì¤„ì”© ë“±ì¥
            setTimeout(() => {
                container.appendChild(row);
                // ë§ˆì§€ë§‰ 5ë²ˆì§¸ ì¤„ì´ ë‚˜ì˜¤ë©´ í­ì£½ + ë²„íŠ¼ í‘œì‹œ
                if (i === 4) {
                    fireConfetti(); // ğŸ’¥ ì—¬ê¸°ê°€ ë³µêµ¬ëœ í­ì£½ í•¨ìˆ˜ í˜¸ì¶œ!
                    const copyBox = document.getElementById('copy-box');
                    if(copyBox) copyBox.style.display = 'block';
                }
            }, i * 150); 
        }
    }

    // ğŸ’¥ ë³µêµ¬ëœ í­ì£½ í•¨ìˆ˜ (ì´ê²Œ ì—†ì–´ì„œ ì—ëŸ¬ê°€ ë‚¬ë˜ ê²ƒ)
    function fireConfetti() {
        if(typeof confetti === 'undefined') return; 
        var count = 200;
        var defaults = { origin: { y: 0.7 } };
        function fire(particleRatio, opts) {
            confetti(Object.assign({}, defaults, opts, {
                particleCount: Math.floor(count * particleRatio)
            }));
        }
        fire(0.25, { spread: 26, startVelocity: 55 });
        fire(0.2, { spread: 60 });
        fire(0.35, { spread: 100, decay: 0.91, scalar: 0.8 });
        fire(0.1, { spread: 120, startVelocity: 25, decay: 0.92, scalar: 1.2 });
        fire(0.1, { spread: 120, startVelocity: 45 });
    }

// 5ê²Œì„ ë³µì‚¬ ê¸°ëŠ¥
    function copyNumbers() {
        const rows = document.querySelectorAll('#result-container .numbers-container');
        if(rows.length === 0) return;

        let text = 'ğŸ€ í™©ê¸ˆì† ë¡œë˜ 5ê²Œì„ ì¶”ì²œ ğŸ€\n\n';
        rows.forEach((row, index) => {
            const balls = row.querySelectorAll('.ball');
            const label = String.fromCharCode(65 + index); 
            text += `${label} : `;
            balls.forEach(ball => { text += ball.textContent + ' '; });
            text += '\n';
        });

        if(navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(text).then(() => {
                alert('5ê²Œì„ ë²ˆí˜¸ê°€ ëª¨ë‘ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }).catch(() => alert('ë³µì‚¬ ì‹¤íŒ¨!'));
        } else {
             alert('ì´ ë¸Œë¼ìš°ì €ëŠ” ë³µì‚¬ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
        }
    }

    // ì¹´ì¹´ì˜¤ ê³µìœ 
    function shareKakao() {
        if (typeof Kakao === 'undefined' || !Kakao.isInitialized()) {
            alert('ì¹´ì¹´ì˜¤í†¡ ê¸°ëŠ¥ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.');
            return;
        }
        Kakao.Share.sendScrap({ requestUrl: shareUrl });
    }

    function getColorClass(num) {
        if (num <= 10) return 'yellow';
        else if (num <= 20) return 'blue';
        else if (num <= 30) return 'red';
        else if (num <= 40) return 'gray';
        else return 'green';
    }

    // ==========================================
    // âœ… 2. ì´ˆê¸°í™” ë° ì„œë²„ í†µì‹  (ì•ˆì „ ëª¨ë“œ)
    // ==========================================
    window.onload = function() {
        try {
            if (typeof Kakao !== 'undefined' && !Kakao.isInitialized()) {
                Kakao.init(YOUR_KAKAO_KEY);
            }
        } catch (e) { console.error("ì¹´ì¹´ì˜¤ ì´ˆê¸°í™” ì‹¤íŒ¨(ë¬´ì‹œ ê°€ëŠ¥):", e); }
        
        fetchLottoNumbers();
    };

    async function fetchLottoNumbers() {
        const resultBox = document.getElementById('latest-win-box');
        const startDate = new Date('2002-12-07');
        const now = new Date();
        const isSatAfter9PM = (now.getDay() === 6 && now.getHours() >= 21);
        const timeDiff = now - startDate;
        const daysDiff = timeDiff / (1000 * 3600 * 24);
        let round = Math.floor(daysDiff / 7) + 1;
        if (!isSatAfter9PM && now.getDay() === 6) { round -= 1; }

        const lottoUrl = 'https://www.dhlottery.co.kr/common.do?method=getLottoNumber&drwNo=' + round;
        
        try {
            // ì„œë²„ ê³¼ë¶€í•˜ì— ëŒ€ë¹„í•´ íƒ€ì„ì•„ì›ƒ(3ì´ˆ) ì„¤ì •
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 3000);

            const response = await fetch(`https://corsproxy.io/?${encodeURIComponent(lottoUrl)}`, { signal: controller.signal });
            clearTimeout(timeoutId);

            if (!response.ok) throw new Error("Network Error");
            const textData = await response.text();
            if (textData.trim().startsWith('<')) throw new Error("Blocked"); // HTML ë°˜í™˜ ì°¨ë‹¨

            const data = JSON.parse(textData);
            if (data.returnValue === 'success') {
                if (resultBox) {
                    resultBox.style.display = 'block';
                    document.getElementById('drwNo').innerText = data.drwNo;
                    document.getElementById('drwDate').innerText = `(${data.drwNoDate} ì¶”ì²¨)`;
                    document.getElementById('bonusNo').innerText = data.bnusNo;
                    const winContainer = document.getElementById('win-numbers');
                    winContainer.innerHTML = ''; 
                    const numbers = [data.drwtNo1, data.drwtNo2, data.drwtNo3, data.drwtNo4, data.drwtNo5, data.drwtNo6];
                    numbers.forEach(num => {
                        const ball = document.createElement('div');
                        ball.className = `ball ${getColorClass(num)}`;
                        ball.textContent = num;
                        ball.style.width = '28px'; ball.style.height = '28px'; ball.style.fontSize = '13px';
                        winContainer.appendChild(ball);
                    });
                }
            } else {
                if(resultBox) resultBox.style.display = 'none';
            }
        } catch (error) {
            console.warn('ë‹¹ì²¨ ë²ˆí˜¸ ë¡œë”© ì‹¤íŒ¨ (ì •ìƒ):', error);
            if(resultBox) resultBox.style.display = 'none';
        }
    }
</script>
</body>
</html>
